{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useNavigate,useParams}from'react-router-dom';import API from'../../services/api';import{generateInvoice}from'../../utils/invoice';import Sidebar from'./Sidebar';import{Box,Typography,Select,MenuItem,Button,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper}from'@mui/material';// Add this constant at the top level\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PRODUCT_NAMES={1:'Phone',3:'Laptop',5:'Funda',7:'Charger',9:'Figura'};const STORE_IDS={gaudi:7,paralel:1,mallorca:5,consell:10,hospital:9};function AdminSales(){const[sales,setSales]=useState([]);const[loading,setLoading]=useState(true);const[timeFilter,setTimeFilter]=useState('all');const navigate=useNavigate();const{store}=useParams();const[productSummary,setProductSummary]=useState([]);const fetchSales=useCallback(async()=>{try{let url='/api/sales?populate=*';// Add store filter if we're not on the general page\nif(store&&STORE_IDS[store]){url+=`&filters[store][id][$eq]=${STORE_IDS[store]}`;}const response=await API.get(url);let filteredSales=response.data.data;// Apply time filter\nconst currentDate=new Date();// Create a base date\nfilteredSales=filteredSales.filter(sale=>{const saleDate=new Date(sale.Time);switch(timeFilter){case'day':const today=new Date(currentDate);today.setHours(0,0,0,0);return saleDate>=today;case'week':const weekAgo=new Date(currentDate);weekAgo.setDate(weekAgo.getDate()-7);return saleDate>=weekAgo;case'month':const monthAgo=new Date(currentDate);monthAgo.setMonth(monthAgo.getMonth()-1);return saleDate>=monthAgo;case'3months':const threeMonthsAgo=new Date(currentDate);threeMonthsAgo.setMonth(threeMonthsAgo.getMonth()-3);return saleDate>=threeMonthsAgo;case'12months':const yearAgo=new Date(currentDate);yearAgo.setFullYear(yearAgo.getFullYear()-1);return saleDate>=yearAgo;default:return true;}});// Sort by date (newest first)\nconst sortedSales=filteredSales.sort((a,b)=>new Date(b.Time).getTime()-new Date(a.Time).getTime());setSales(sortedSales);}catch(error){console.error('Error fetching sales:',error);}finally{setLoading(false);}},[store,timeFilter]);useEffect(()=>{fetchSales();},[store,timeFilter,fetchSales]);useEffect(()=>{const fetchData=async()=>{try{const response=await API.get(`/api/sales?filters[store]=${store}&populate=*`);const salesData=response.data.data;// Renamed to avoid state conflict\n// Calculate product summary\nconst summary={};salesData.forEach(sale=>{const productId=sale.attributes.product.data.id;if(!summary[productId]){summary[productId]={name:PRODUCT_NAMES[productId],count:0,totalRevenue:0};}summary[productId].count+=1;summary[productId].totalRevenue+=parseFloat(sale.attributes.Price);});setProductSummary(Object.entries(summary));setLoading(false);}catch(error){console.error('Error fetching sales data:',error);setLoading(false);}};fetchData();},[store]);const handleDownloadInvoice=sale=>{const items=[{product:{Product:sale.product.Product},price:sale.Price}];generateInvoice(items,sale.Price);};if(loading)return/*#__PURE__*/_jsx(Box,{sx:{ml:'240px',p:3},children:/*#__PURE__*/_jsx(Typography,{children:\"Loading sales data...\"})});return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,ml:'280px',// Match sidebar width\nbackgroundColor:'#f5f5f5',// Moved bgcolor here\nminHeight:'100vh',p:2},children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'#fff',borderRadius:1,p:3},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:3},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:1,fontWeight:600,color:'#333'// Dark text for better contrast\n},children:store?`${store.charAt(0).toUpperCase()+store.slice(1)} Sales`:'All Stores Sales'}),/*#__PURE__*/_jsxs(Select,{value:timeFilter,onChange:e=>setTimeFilter(e.target.value),size:\"small\",sx:{minWidth:200},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Time\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"day\",children:\"Today\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"week\",children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"month\",children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"3months\",children:\"Last 3 Months\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"12months\",children:\"Last 12 Months\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:()=>navigate('/admin'),children:\"Logout\"})]}),/*#__PURE__*/_jsxs(Box,{sx:{mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Store Sales Summary\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Product\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Units Sold\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Total Revenue\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Average Price\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:productSummary.map(_ref=>{let[productId,data]=_ref;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:data.name}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:data.count}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[\"\\u20AC\",data.totalRevenue.toFixed(2)]}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[\"\\u20AC\",(data.totalRevenue/data.count).toFixed(2)]})]},productId);})})]})})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Store\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Time\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Product\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Price\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:sales&&sales.length>0?sales.map(sale=>{var _sale$store,_sale$product,_sale$Price;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:((_sale$store=sale.store)===null||_sale$store===void 0?void 0:_sale$store.Name)||'Unknown Store'}),/*#__PURE__*/_jsx(TableCell,{children:sale.Time?new Date(sale.Time).toLocaleDateString('es-ES'):'N/A'}),/*#__PURE__*/_jsx(TableCell,{children:sale.Time?new Date(sale.Time).toLocaleTimeString('es-ES'):'N/A'}),/*#__PURE__*/_jsx(TableCell,{children:((_sale$product=sale.product)===null||_sale$product===void 0?void 0:_sale$product.Product)||'N/A'}),/*#__PURE__*/_jsxs(TableCell,{children:[\"\\u20AC\",((_sale$Price=sale.Price)===null||_sale$Price===void 0?void 0:_sale$Price.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>handleDownloadInvoice(sale),size:\"small\",children:\"Download Invoice\"})})]},sale.id);}):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:\"No sales records found\"})})})]})})]})})]});}export default AdminSales;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","API","generateInvoice","Sidebar","Box","Typography","Select","MenuItem","Button","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","jsx","_jsx","jsxs","_jsxs","PRODUCT_NAMES","STORE_IDS","gaudi","paralel","mallorca","consell","hospital","AdminSales","sales","setSales","loading","setLoading","timeFilter","setTimeFilter","navigate","store","productSummary","setProductSummary","fetchSales","url","response","get","filteredSales","data","currentDate","Date","filter","sale","saleDate","Time","today","setHours","weekAgo","setDate","getDate","monthAgo","setMonth","getMonth","threeMonthsAgo","yearAgo","setFullYear","getFullYear","sortedSales","sort","a","b","getTime","error","console","fetchData","salesData","summary","forEach","productId","attributes","product","id","name","count","totalRevenue","parseFloat","Price","Object","entries","handleDownloadInvoice","items","Product","price","sx","ml","p","children","display","flexGrow","backgroundColor","minHeight","borderRadius","justifyContent","alignItems","mb","variant","fontWeight","color","charAt","toUpperCase","slice","value","onChange","e","target","size","minWidth","onClick","gutterBottom","component","align","map","_ref","toFixed","length","_sale$store","_sale$product","_sale$Price","Name","toLocaleDateString","toLocaleTimeString","colSpan"],"sources":["/Users/oan/Desktop/POS/pos-frontend/src/components/admin/AdminSales.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport API from '../../services/api';\nimport { generateInvoice } from '../../utils/invoice';\nimport Sidebar from './Sidebar';\nimport {\n  Box,\n  Typography,\n  Select,\n  MenuItem,\n  Button,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper\n} from '@mui/material';\n\n// Add this constant at the top level\nconst PRODUCT_NAMES = {\n  1: 'Phone',\n  3: 'Laptop',\n  5: 'Funda',\n  7: 'Charger',\n  9: 'Figura'\n};\n\nconst STORE_IDS = {\n  gaudi: 7,\n  paralel: 1,\n  mallorca: 5,\n  consell: 10,\n  hospital: 9\n};\n\nfunction AdminSales() {\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [timeFilter, setTimeFilter] = useState('all');\n  const navigate = useNavigate();\n  const { store } = useParams();\n  const [productSummary, setProductSummary] = useState([]);\n\n  const fetchSales = useCallback(async () => {\n    try {\n      let url = '/api/sales?populate=*';\n      \n      // Add store filter if we're not on the general page\n      if (store && STORE_IDS[store]) {\n        url += `&filters[store][id][$eq]=${STORE_IDS[store]}`;\n      }\n\n      const response = await API.get(url);\n      let filteredSales = response.data.data;\n\n      // Apply time filter\n      const currentDate = new Date(); // Create a base date\n      filteredSales = filteredSales.filter(sale => {\n        const saleDate = new Date(sale.Time);\n        \n        switch (timeFilter) {\n          case 'day':\n            const today = new Date(currentDate);\n            today.setHours(0, 0, 0, 0);\n            return saleDate >= today;\n            \n          case 'week':\n            const weekAgo = new Date(currentDate);\n            weekAgo.setDate(weekAgo.getDate() - 7);\n            return saleDate >= weekAgo;\n            \n          case 'month':\n            const monthAgo = new Date(currentDate);\n            monthAgo.setMonth(monthAgo.getMonth() - 1);\n            return saleDate >= monthAgo;\n            \n          case '3months':\n            const threeMonthsAgo = new Date(currentDate);\n            threeMonthsAgo.setMonth(threeMonthsAgo.getMonth() - 3);\n            return saleDate >= threeMonthsAgo;\n            \n          case '12months':\n            const yearAgo = new Date(currentDate);\n            yearAgo.setFullYear(yearAgo.getFullYear() - 1);\n            return saleDate >= yearAgo;\n            \n          default:\n            return true;\n        }\n      });\n\n      // Sort by date (newest first)\n      const sortedSales = filteredSales.sort((a, b) => \n        new Date(b.Time).getTime() - new Date(a.Time).getTime()\n      );\n      \n      setSales(sortedSales);\n    } catch (error) {\n      console.error('Error fetching sales:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [store, timeFilter]);\n\n  useEffect(() => {\n    fetchSales();\n  }, [store, timeFilter, fetchSales]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await API.get(`/api/sales?filters[store]=${store}&populate=*`);\n        const salesData = response.data.data;  // Renamed to avoid state conflict\n\n        // Calculate product summary\n        const summary = {};\n        salesData.forEach(sale => {\n          const productId = sale.attributes.product.data.id;\n          if (!summary[productId]) {\n            summary[productId] = {\n              name: PRODUCT_NAMES[productId],\n              count: 0,\n              totalRevenue: 0\n            };\n          }\n          summary[productId].count += 1;\n          summary[productId].totalRevenue += parseFloat(sale.attributes.Price);\n        });\n\n        setProductSummary(Object.entries(summary));\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching sales data:', error);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [store]);\n\n  const handleDownloadInvoice = (sale) => {\n    const items = [{\n      product: { Product: sale.product.Product },\n      price: sale.Price\n    }];\n    generateInvoice(items, sale.Price);\n  };\n\n  if (loading) return (\n    <Box sx={{ ml: '240px', p: 3 }}>\n      <Typography>Loading sales data...</Typography>\n    </Box>\n  );\n\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <Sidebar />\n      <Box sx={{ \n        flexGrow: 1, \n        ml: '280px',  // Match sidebar width\n        backgroundColor: '#f5f5f5',  // Moved bgcolor here\n        minHeight: '100vh',\n        p: 2,\n      }}>\n        <Box sx={{ \n          backgroundColor: '#fff',\n          borderRadius: 1,\n          p: 3,\n        }}>\n          <Box sx={{ \n            display: 'flex', \n            justifyContent: 'space-between', \n            alignItems: 'center',\n            mb: 3,\n          }}>\n            <Box>\n              <Typography variant=\"h4\" sx={{ \n                mb: 1,\n                fontWeight: 600,\n                color: '#333'  // Dark text for better contrast\n              }}>\n                {store ? `${store.charAt(0).toUpperCase() + store.slice(1)} Sales` : 'All Stores Sales'}\n              </Typography>\n              <Select\n                value={timeFilter}\n                onChange={(e) => setTimeFilter(e.target.value)}\n                size=\"small\"\n                sx={{ minWidth: 200 }}\n              >\n                <MenuItem value=\"all\">All Time</MenuItem>\n                <MenuItem value=\"day\">Today</MenuItem>\n                <MenuItem value=\"week\">Last 7 Days</MenuItem>\n                <MenuItem value=\"month\">Last 30 Days</MenuItem>\n                <MenuItem value=\"3months\">Last 3 Months</MenuItem>\n                <MenuItem value=\"12months\">Last 12 Months</MenuItem>\n              </Select>\n            </Box>\n            <Button \n              variant=\"contained\" \n              color=\"error\"\n              onClick={() => navigate('/admin')}\n            >\n              Logout\n            </Button>\n          </Box>\n\n          <Box sx={{ mb: 4 }}>\n            <Typography variant=\"h6\" gutterBottom>\n              Store Sales Summary\n            </Typography>\n            <TableContainer component={Paper}>\n              <Table>\n                <TableHead>\n                  <TableRow>\n                    <TableCell>Product</TableCell>\n                    <TableCell align=\"right\">Units Sold</TableCell>\n                    <TableCell align=\"right\">Total Revenue</TableCell>\n                    <TableCell align=\"right\">Average Price</TableCell>\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {productSummary.map(([productId, data]) => (\n                    <TableRow key={productId}>\n                      <TableCell>{data.name}</TableCell>\n                      <TableCell align=\"right\">{data.count}</TableCell>\n                      <TableCell align=\"right\">\n                        €{data.totalRevenue.toFixed(2)}\n                      </TableCell>\n                      <TableCell align=\"right\">\n                        €{(data.totalRevenue / data.count).toFixed(2)}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </Box>\n\n          <TableContainer component={Paper}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Store</TableCell>\n                  <TableCell>Date</TableCell>\n                  <TableCell>Time</TableCell>\n                  <TableCell>Product</TableCell>\n                  <TableCell>Price</TableCell>\n                  <TableCell>Actions</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {sales && sales.length > 0 ? (\n                  sales.map((sale) => (\n                    <TableRow key={sale.id}>\n                      <TableCell>{sale.store?.Name || 'Unknown Store'}</TableCell>\n                      <TableCell>{sale.Time ? new Date(sale.Time).toLocaleDateString('es-ES') : 'N/A'}</TableCell>\n                      <TableCell>{sale.Time ? new Date(sale.Time).toLocaleTimeString('es-ES') : 'N/A'}</TableCell>\n                      <TableCell>{sale.product?.Product || 'N/A'}</TableCell>\n                      <TableCell>€{sale.Price?.toFixed(2) || '0.00'}</TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"contained\"\n                          onClick={() => handleDownloadInvoice(sale)}\n                          size=\"small\"\n                        >\n                          Download Invoice\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={6} align=\"center\">\n                      No sales records found\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n\nexport default AdminSales; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}