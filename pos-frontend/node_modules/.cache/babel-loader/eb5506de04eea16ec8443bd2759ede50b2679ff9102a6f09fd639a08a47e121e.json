{"ast":null,"code":"import React,{useState,useEffect}from'react';import API from'../../services/api';import Sidebar from'./Sidebar';import{Box,Typography,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductStats(){const[productStats,setProductStats]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchStats=async()=>{try{// Get all sales\nconst salesResponse=await API.get('/api/sales');const sales=salesResponse.data.data;// Log the first sale to see its structure\nconsole.log('First sale:',sales[0]);console.log('First sale attributes:',sales[0].attributes);// Map products to their stats\nconst stats=[{id:1,name:\"Phone\",count:0,totalRevenue:0},{id:3,name:\"Laptop\",count:0,totalRevenue:0},{id:5,name:\"Funda\",count:0,totalRevenue:0},{id:7,name:\"Charger\",count:0,totalRevenue:0},{id:9,name:\"Figura\",count:0,totalRevenue:0},{id:11,name:\"Custom\",count:0,totalRevenue:0}];// Process each sale\nsales.forEach(sale=>{if(!sale.attributes)return;// Log each sale's product ID and price\nconsole.log('Processing sale:',{id:sale.id,productId:sale.attributes.product,price:sale.attributes.Price});const productId=parseInt(sale.attributes.product);const price=parseFloat(sale.attributes.Price||0);const productStat=stats.find(s=>s.id===productId);if(productStat){productStat.count+=1;productStat.totalRevenue+=price;}});setProductStats(stats);}catch(error){console.error('Error:',error);}finally{setLoading(false);}};fetchStats();},[]);if(loading){return/*#__PURE__*/_jsx(Box,{sx:{ml:'280px',p:3},children:/*#__PURE__*/_jsx(Typography,{children:\"Loading stats...\"})});}return/*#__PURE__*/_jsxs(Box,{sx:{display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,ml:'280px',backgroundColor:'#f5f5f5',minHeight:'100vh',p:2},children:/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:'#fff',borderRadius:1,p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",sx:{mb:3,fontWeight:600},children:\"Product Statistics\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Product Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Total Sales\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Total Revenue\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:productStats.length>0?productStats.map(stat=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:stat.name}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:stat.count}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[\"\\u20AC\",stat.totalRevenue.toFixed(2)]})]},stat.id)):/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:3,align:\"center\",children:\"No sales data found\"})})})]})})]})})]});}export default ProductStats;","map":{"version":3,"names":["React","useState","useEffect","API","Sidebar","Box","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","jsx","_jsx","jsxs","_jsxs","ProductStats","productStats","setProductStats","loading","setLoading","fetchStats","salesResponse","get","sales","data","console","log","attributes","stats","id","name","count","totalRevenue","forEach","sale","productId","product","price","Price","parseInt","parseFloat","productStat","find","s","error","sx","ml","p","children","display","flexGrow","backgroundColor","minHeight","borderRadius","variant","mb","fontWeight","component","align","length","map","stat","toFixed","colSpan"],"sources":["/Users/oan/Desktop/POS/pos-frontend/src/components/admin/ProductStats.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../../services/api';\nimport Sidebar from './Sidebar';\nimport {\n  Box,\n  Typography,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n} from '@mui/material';\n\nfunction ProductStats() {\n  const [productStats, setProductStats] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        // Get all sales\n        const salesResponse = await API.get('/api/sales');\n        const sales = salesResponse.data.data;\n\n        // Log the first sale to see its structure\n        console.log('First sale:', sales[0]);\n        console.log('First sale attributes:', sales[0].attributes);\n\n        // Map products to their stats\n        const stats = [\n          { id: 1, name: \"Phone\", count: 0, totalRevenue: 0 },\n          { id: 3, name: \"Laptop\", count: 0, totalRevenue: 0 },\n          { id: 5, name: \"Funda\", count: 0, totalRevenue: 0 },\n          { id: 7, name: \"Charger\", count: 0, totalRevenue: 0 },\n          { id: 9, name: \"Figura\", count: 0, totalRevenue: 0 },\n          { id: 11, name: \"Custom\", count: 0, totalRevenue: 0 }\n        ];\n\n        // Process each sale\n        sales.forEach(sale => {\n          if (!sale.attributes) return;\n\n          // Log each sale's product ID and price\n          console.log('Processing sale:', {\n            id: sale.id,\n            productId: sale.attributes.product,\n            price: sale.attributes.Price\n          });\n\n          const productId = parseInt(sale.attributes.product);\n          const price = parseFloat(sale.attributes.Price || 0);\n\n          const productStat = stats.find(s => s.id === productId);\n          if (productStat) {\n            productStat.count += 1;\n            productStat.totalRevenue += price;\n          }\n        });\n\n        setProductStats(stats);\n      } catch (error) {\n        console.error('Error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, []);\n\n  if (loading) {\n    return (\n      <Box sx={{ ml: '280px', p: 3 }}>\n        <Typography>Loading stats...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ display: 'flex' }}>\n      <Sidebar />\n      <Box sx={{ \n        flexGrow: 1, \n        ml: '280px', \n        backgroundColor: '#f5f5f5', \n        minHeight: '100vh', \n        p: 2 \n      }}>\n        <Box sx={{ \n          backgroundColor: '#fff',\n          borderRadius: 1,\n          p: 3,\n        }}>\n          <Typography variant=\"h4\" sx={{ mb: 3, fontWeight: 600 }}>\n            Product Statistics\n          </Typography>\n\n          <TableContainer component={Paper}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Product Name</TableCell>\n                  <TableCell align=\"right\">Total Sales</TableCell>\n                  <TableCell align=\"right\">Total Revenue</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {productStats.length > 0 ? (\n                  productStats.map((stat) => (\n                    <TableRow key={stat.id}>\n                      <TableCell>{stat.name}</TableCell>\n                      <TableCell align=\"right\">{stat.count}</TableCell>\n                      <TableCell align=\"right\">â‚¬{stat.totalRevenue.toFixed(2)}</TableCell>\n                    </TableRow>\n                  ))\n                ) : (\n                  <TableRow>\n                    <TableCell colSpan={3} align=\"center\">\n                      No sales data found\n                    </TableCell>\n                  </TableRow>\n                )}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </Box>\n      </Box>\n    </Box>\n  );\n}\n\nexport default ProductStats; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}