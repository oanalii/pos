{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import API from'../services/api';import{generateInvoice}from'../utils/invoice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SalesDashboard(){const[sales,setSales]=useState([]);const[loading,setLoading]=useState(true);const[selectedVat,setSelectedVat]=useState(0);const navigate=useNavigate();const storeId=localStorage.getItem('storeId');useEffect(()=>{const token=localStorage.getItem('jwtToken');if(!token){navigate('/login');return;}const fetchSales=async()=>{try{console.log('Fetching sales for store:',storeId);const response=await API.get('/api/sales',{params:{'filters[store][id][$eq]':storeId,'populate':{'invoice':true,'product':true,'*':true},'sort':'createdAt:desc'}});const sortedSales=response.data.data.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime());console.log('Sorted sales:',sortedSales);setSales(sortedSales);}catch(error){console.error('Error fetching sales:',error);}finally{setLoading(false);}};fetchSales();},[storeId,navigate]);const handleDownloadInvoice=async sale=>{// Find related sales either by orderGroupId or by time (within 1 second)\nlet relatedSales;if(sale.orderGroupId){// If orderGroupId exists, use it\nrelatedSales=sales.filter(s=>s.orderGroupId===sale.orderGroupId);}else{// Fallback to time-based grouping for older sales\nconst saleTime=new Date(sale.Time).getTime();relatedSales=sales.filter(s=>{const timeDiff=Math.abs(new Date(s.Time).getTime()-saleTime);return timeDiff<1000;});}console.log('Related sales:',relatedSales);if(relatedSales.length===0){console.error('No related sales found for sale:',sale);return;}const items=relatedSales.map(s=>{var _s$product;return{product:{Product:((_s$product=s.product)===null||_s$product===void 0?void 0:_s$product.Product)||'Producto no especificado'},price:s.Price,description:s.description||''};});console.log('Items for invoice:',items);const total=relatedSales.reduce((sum,s)=>sum+s.Price,0);await generateInvoice(items,total,sale,selectedVat);};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{height:'100vh',display:'flex',alignItems:'center',justifyContent:'center',color:'hsl(215.4 16.3% 46.9%)',fontSize:'14px',fontWeight:'500',fontFamily:'system-ui'},children:\"Loading sales data...\"});}// --- Calculate a dynamic max-height for the table container ---\n// Adjust the '180px' based on the actual combined height of the header,\n// buttons, and padding above the table. You might need to tweak this.\nconst tableContainerMaxHeight='calc(100vh - 200px)';return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'32px',maxWidth:'1200px',margin:'0 auto',backgroundColor:'hsl(0 0% 100%)',// Ensure the main container doesn't cause double scrollbars unnecessarily\n// Depending on your overall layout, you might need overflow adjustments higher up too.\nheight:'100vh',// Make outer container viewport height\ndisplay:'flex',// Use flexbox for layout\nflexDirection:'column'// Stack children vertically\n},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'32px',flexShrink:0// Prevent header from shrinking\n},children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:'22px',fontWeight:'600',color:'hsl(222.2 47.4% 11.2%)',margin:0,fontFamily:'system-ui',letterSpacing:'-0.025em'},children:\"Sales History\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/pos'),onMouseEnter:e=>{e.currentTarget.style.backgroundColor='hsl(210 40% 98%)';e.currentTarget.style.borderColor='hsl(215.4 16.3% 46.9%)';},onMouseLeave:e=>{e.currentTarget.style.backgroundColor='white';e.currentTarget.style.borderColor='hsl(240 5.9% 90%)';},style:{padding:'10px 16px',backgroundColor:'white',color:'hsl(222.2 47.4% 11.2%)',border:'1px solid hsl(240 5.9% 90%)',borderRadius:'6px',cursor:'pointer',fontSize:'14px',fontWeight:'500',transition:'all 0.15s ease',display:'flex',alignItems:'center',gap:'8px',fontFamily:'system-ui'},children:[/*#__PURE__*/_jsx(\"svg\",{width:\"15\",height:\"15\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19 12H5M12 19l-7-7 7-7\"})}),\"Back to POS\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'white',borderRadius:'8px',border:'1px solid hsl(240 5.9% 90%)',overflowY:'auto',// Enable vertical scroll\nboxShadow:'0 1px 3px rgba(0, 0, 0, 0.05)',flexGrow:1,// Allow this container to grow and fill remaining space\nmaxHeight:tableContainerMaxHeight,// Apply calculated max height\nposition:'relative'// Needed for sticky header positioning context\n},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'// Optional: Add border-spacing for visual separation if border-collapse is changed\n// borderSpacing: 0, \n},children:[/*#__PURE__*/_jsx(\"thead\",{style:{position:'sticky',// Make the header sticky\ntop:0,// Stick to the top of the scrolling container\nzIndex:1// Ensure header stays above table body content\n},children:/*#__PURE__*/_jsxs(\"tr\",{style:{// Ensure header row has a solid background to hide scrolled content\nbackgroundColor:'white',borderBottom:'1.5px solid hsl(240 5.9% 90%)'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px 20px',textAlign:'left',fontSize:'13px',fontWeight:'600',color:'hsl(222.2 47.4% 11.2%)',fontFamily:'system-ui'},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Time\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Amount Paid\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{style:{...headerStyle},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sales&&sales.length>0?sales.map(sale=>{var _sale$product,_sale$Price;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid hsl(240 5.9% 90%)',transition:'background-color 0.15s ease'},onMouseEnter:e=>{e.currentTarget.style.backgroundColor='hsl(210 40% 98%)';},onMouseLeave:e=>{e.currentTarget.style.backgroundColor='white';},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px 20px',fontSize:'13px',color:'hsl(222.2 47.4% 11.2%)',fontFamily:'system-ui'},children:sale.Time?new Date(sale.Time).toLocaleDateString('es-ES'):'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{...cellStyle},children:sale.Time?new Date(sale.Time).toLocaleTimeString('es-ES'):'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{...cellStyle},children:((_sale$product=sale.product)===null||_sale$product===void 0?void 0:_sale$product.Product)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{...cellStyle},children:sale.description||'No description'}),/*#__PURE__*/_jsx(\"td\",{style:{...cellStyle,textTransform:'capitalize'},children:sale.paymentmethod||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{...cellStyle,fontWeight:'500'},children:typeof sale.paymentamount==='number'?`€${sale.paymentamount.toFixed(2)}`:'N/A'}),/*#__PURE__*/_jsxs(\"td\",{style:{...cellStyle,fontWeight:'500'},children:[\"\\u20AC\",((_sale$Price=sale.Price)===null||_sale$Price===void 0?void 0:_sale$Price.toFixed(2))||'0.00']}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'8px 20px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedVat,onChange:e=>setSelectedVat(Number(e.target.value)),style:{padding:'6px 10px',borderRadius:'6px',border:'1px solid hsl(240 5.9% 90%)',fontSize:'13px',color:'hsl(222.2 47.4% 11.2%)',backgroundColor:'white',cursor:'pointer',fontFamily:'system-ui'},children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"IVA: 0%\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"IVA: 10%\"}),/*#__PURE__*/_jsx(\"option\",{value:21,children:\"IVA: 21%\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDownloadInvoice(sale),onMouseEnter:e=>{e.currentTarget.style.backgroundColor='hsl(221.2 83.2% 53.3%)';},onMouseLeave:e=>{e.currentTarget.style.backgroundColor='hsl(222.2 47.4% 11.2%)';},style:{padding:'6px 12px',backgroundColor:'hsl(222.2 47.4% 11.2%)',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontSize:'13px',fontWeight:'500',transition:'all 0.15s ease',fontFamily:'system-ui'},children:\"Download Invoice\"})]})})]},sale.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",style:{textAlign:'center',padding:'24px',color:'hsl(215.4 16.3% 46.9%)',fontSize:'13px',fontFamily:'system-ui'},children:\"No sales records found\"})})})]})})]});}const headerStyle={padding:'12px 20px',textAlign:'left',fontSize:'13px',fontWeight:'600',color:'hsl(222.2 47.4% 11.2%)',fontFamily:'system-ui'};const cellStyle={padding:'12px 20px',fontSize:'13px',color:'hsl(222.2 47.4% 11.2%)',fontFamily:'system-ui'};export default SalesDashboard;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","API","generateInvoice","jsx","_jsx","jsxs","_jsxs","SalesDashboard","sales","setSales","loading","setLoading","selectedVat","setSelectedVat","navigate","storeId","localStorage","getItem","token","fetchSales","console","log","response","get","params","sortedSales","data","sort","a","b","Date","createdAt","getTime","error","handleDownloadInvoice","sale","relatedSales","orderGroupId","filter","s","saleTime","Time","timeDiff","Math","abs","length","items","map","_s$product","product","Product","price","Price","description","total","reduce","sum","style","height","display","alignItems","justifyContent","color","fontSize","fontWeight","fontFamily","children","tableContainerMaxHeight","padding","maxWidth","margin","backgroundColor","flexDirection","marginBottom","flexShrink","letterSpacing","onClick","onMouseEnter","e","currentTarget","borderColor","onMouseLeave","border","borderRadius","cursor","transition","gap","width","viewBox","fill","stroke","strokeWidth","d","overflowY","boxShadow","flexGrow","maxHeight","position","borderCollapse","top","zIndex","borderBottom","textAlign","headerStyle","_sale$product","_sale$Price","toLocaleDateString","cellStyle","toLocaleTimeString","textTransform","paymentmethod","paymentamount","toFixed","value","onChange","Number","target","id","colSpan"],"sources":["/Users/oan/Desktop/POS/pos-frontend/src/components/SalesDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport API from '../services/api';\nimport { generateInvoice } from '../utils/invoice';\n\nfunction SalesDashboard() {\n  const [sales, setSales] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedVat, setSelectedVat] = useState(0);\n  const navigate = useNavigate();\n  const storeId = localStorage.getItem('storeId');\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwtToken');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n    const fetchSales = async () => {\n      try {\n        console.log('Fetching sales for store:', storeId);\n        const response = await API.get('/api/sales', {\n          params: {\n            'filters[store][id][$eq]': storeId,\n            'populate': {\n              'invoice': true,\n              'product': true,\n              '*': true\n            },\n            'sort': 'createdAt:desc'\n          }\n        });\n        \n        const sortedSales = response.data.data.sort((a, b) => \n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        );\n        \n        console.log('Sorted sales:', sortedSales);\n        setSales(sortedSales);\n      } catch (error) {\n        console.error('Error fetching sales:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSales();\n  }, [storeId, navigate]);\n\n  const handleDownloadInvoice = async (sale) => {\n    // Find related sales either by orderGroupId or by time (within 1 second)\n    let relatedSales;\n    \n    if (sale.orderGroupId) {\n      // If orderGroupId exists, use it\n      relatedSales = sales.filter(s => s.orderGroupId === sale.orderGroupId);\n    } else {\n      // Fallback to time-based grouping for older sales\n      const saleTime = new Date(sale.Time).getTime();\n      relatedSales = sales.filter(s => {\n        const timeDiff = Math.abs(new Date(s.Time).getTime() - saleTime);\n        return timeDiff < 1000;\n      });\n    }\n    \n    console.log('Related sales:', relatedSales);\n    \n    if (relatedSales.length === 0) {\n      console.error('No related sales found for sale:', sale);\n      return;\n    }\n\n    const items = relatedSales.map(s => ({\n      product: { \n        Product: s.product?.Product || 'Producto no especificado'\n      },\n      price: s.Price,\n      description: s.description || ''\n    }));\n    \n    console.log('Items for invoice:', items);\n    \n    const total = relatedSales.reduce((sum, s) => sum + s.Price, 0);\n    \n    await generateInvoice(items, total, sale, selectedVat);\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        height: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: 'hsl(215.4 16.3% 46.9%)',\n        fontSize: '14px',\n        fontWeight: '500',\n        fontFamily: 'system-ui'\n      }}>\n        Loading sales data...\n      </div>\n    );\n  }\n\n  // --- Calculate a dynamic max-height for the table container ---\n  // Adjust the '180px' based on the actual combined height of the header,\n  // buttons, and padding above the table. You might need to tweak this.\n  const tableContainerMaxHeight = 'calc(100vh - 200px)'; \n\n  return (\n    <div style={{ \n      padding: '32px',\n      maxWidth: '1200px',\n      margin: '0 auto',\n      backgroundColor: 'hsl(0 0% 100%)',\n      // Ensure the main container doesn't cause double scrollbars unnecessarily\n      // Depending on your overall layout, you might need overflow adjustments higher up too.\n      height: '100vh', // Make outer container viewport height\n      display: 'flex', // Use flexbox for layout\n      flexDirection: 'column' // Stack children vertically\n    }}>\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        alignItems: 'center',\n        marginBottom: '32px',\n        flexShrink: 0 // Prevent header from shrinking\n      }}>\n        <h1 style={{\n          fontSize: '22px',\n          fontWeight: '600',\n          color: 'hsl(222.2 47.4% 11.2%)',\n          margin: 0,\n          fontFamily: 'system-ui',\n          letterSpacing: '-0.025em'\n        }}>\n          Sales History\n        </h1>\n\n        <button\n          onClick={() => navigate('/pos')}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.backgroundColor = 'hsl(210 40% 98%)';\n            e.currentTarget.style.borderColor = 'hsl(215.4 16.3% 46.9%)';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.backgroundColor = 'white';\n            e.currentTarget.style.borderColor = 'hsl(240 5.9% 90%)';\n          }}\n          style={{\n            padding: '10px 16px',\n            backgroundColor: 'white',\n            color: 'hsl(222.2 47.4% 11.2%)',\n            border: '1px solid hsl(240 5.9% 90%)',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: '500',\n            transition: 'all 0.15s ease',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px',\n            fontFamily: 'system-ui'\n          }}\n        >\n          <svg width=\"15\" height=\"15\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M19 12H5M12 19l-7-7 7-7\"/>\n          </svg>\n          Back to POS\n        </button>\n      </div>\n\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        border: '1px solid hsl(240 5.9% 90%)',\n        overflowY: 'auto',   // Enable vertical scroll\n        boxShadow: '0 1px 3px rgba(0, 0, 0, 0.05)',\n        flexGrow: 1, // Allow this container to grow and fill remaining space\n        maxHeight: tableContainerMaxHeight, // Apply calculated max height\n        position: 'relative' // Needed for sticky header positioning context\n      }}>\n        <table style={{ \n          width: '100%', \n          borderCollapse: 'collapse',\n          // Optional: Add border-spacing for visual separation if border-collapse is changed\n          // borderSpacing: 0, \n        }}>\n          {/* Sticky Table Header */}\n          <thead style={{\n            position: 'sticky', // Make the header sticky\n            top: 0, // Stick to the top of the scrolling container\n            zIndex: 1, // Ensure header stays above table body content\n          }}>\n            <tr style={{\n              // Ensure header row has a solid background to hide scrolled content\n              backgroundColor: 'white', \n              borderBottom: '1.5px solid hsl(240 5.9% 90%)'\n            }}>\n              <th style={{ \n                padding: '12px 20px',\n                textAlign: 'left',\n                fontSize: '13px',\n                fontWeight: '600',\n                color: 'hsl(222.2 47.4% 11.2%)',\n                fontFamily: 'system-ui'\n              }}>Date</th>\n              <th style={{ ...headerStyle }}>Time</th>\n              <th style={{ ...headerStyle }}>Product</th>\n              <th style={{ ...headerStyle }}>Description</th>\n              <th style={{ ...headerStyle }}>Payment</th>\n              <th style={{ ...headerStyle }}>Amount Paid</th>\n              <th style={{ ...headerStyle }}>Price</th>\n              <th style={{ ...headerStyle }}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sales && sales.length > 0 ? (\n              sales.map((sale) => (\n                <tr \n                  key={sale.id} \n                  style={{ \n                    borderBottom: '1px solid hsl(240 5.9% 90%)',\n                    transition: 'background-color 0.15s ease'\n                  }}\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.backgroundColor = 'hsl(210 40% 98%)';\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.backgroundColor = 'white';\n                  }}\n                >\n                  <td style={{ \n                    padding: '12px 20px',\n                    fontSize: '13px',\n                    color: 'hsl(222.2 47.4% 11.2%)',\n                    fontFamily: 'system-ui'\n                  }}>\n                    {sale.Time ? new Date(sale.Time).toLocaleDateString('es-ES') : 'N/A'}\n                  </td>\n                  <td style={{ ...cellStyle }}>\n                    {sale.Time ? new Date(sale.Time).toLocaleTimeString('es-ES') : 'N/A'}\n                  </td>\n                  <td style={{ ...cellStyle }}>\n                    {sale.product?.Product || 'N/A'}\n                  </td>\n                  <td style={{ ...cellStyle }}>\n                    {sale.description || 'No description'}\n                  </td>\n                  <td style={{ ...cellStyle, textTransform: 'capitalize' }}>\n                    {sale.paymentmethod || 'N/A'}\n                  </td>\n                  <td style={{ ...cellStyle, fontWeight: '500' }}>\n                    {typeof sale.paymentamount === 'number' ? `€${sale.paymentamount.toFixed(2)}` : 'N/A'}\n                  </td>\n                  <td style={{ ...cellStyle, fontWeight: '500' }}>\n                    €{sale.Price?.toFixed(2) || '0.00'}\n                  </td>\n                  <td style={{ padding: '8px 20px' }}>\n                    <div style={{ \n                      display: 'flex', \n                      gap: '8px', \n                      alignItems: 'center'\n                    }}>\n                      <select\n                        value={selectedVat}\n                        onChange={(e) => setSelectedVat(Number(e.target.value))}\n                        style={{\n                          padding: '6px 10px',\n                          borderRadius: '6px',\n                          border: '1px solid hsl(240 5.9% 90%)',\n                          fontSize: '13px',\n                          color: 'hsl(222.2 47.4% 11.2%)',\n                          backgroundColor: 'white',\n                          cursor: 'pointer',\n                          fontFamily: 'system-ui'\n                        }}\n                      >\n                        <option value={0}>IVA: 0%</option>\n                        <option value={10}>IVA: 10%</option>\n                        <option value={21}>IVA: 21%</option>\n                      </select>\n                      <button\n                        onClick={() => handleDownloadInvoice(sale)}\n                        onMouseEnter={(e) => {\n                          e.currentTarget.style.backgroundColor = 'hsl(221.2 83.2% 53.3%)';\n                        }}\n                        onMouseLeave={(e) => {\n                          e.currentTarget.style.backgroundColor = 'hsl(222.2 47.4% 11.2%)';\n                        }}\n                        style={{\n                          padding: '6px 12px',\n                          backgroundColor: 'hsl(222.2 47.4% 11.2%)',\n                          color: 'white',\n                          border: 'none',\n                          borderRadius: '6px',\n                          cursor: 'pointer',\n                          fontSize: '13px',\n                          fontWeight: '500',\n                          transition: 'all 0.15s ease',\n                          fontFamily: 'system-ui'\n                        }}\n                      >\n                        Download Invoice\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            ) : (\n              <tr>\n                <td \n                  colSpan=\"8\"\n                  style={{ \n                    textAlign: 'center', \n                    padding: '24px',\n                    color: 'hsl(215.4 16.3% 46.9%)',\n                    fontSize: '13px',\n                    fontFamily: 'system-ui'\n                  }}\n                >\n                  No sales records found\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nconst headerStyle = {\n  padding: '12px 20px',\n  textAlign: 'left',\n  fontSize: '13px',\n  fontWeight: '600',\n  color: 'hsl(222.2 47.4% 11.2%)',\n  fontFamily: 'system-ui'\n};\n\nconst cellStyle = {\n  padding: '12px 20px',\n  fontSize: '13px',\n  color: 'hsl(222.2 47.4% 11.2%)',\n  fontFamily: 'system-ui'\n};\n\nexport default SalesDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}